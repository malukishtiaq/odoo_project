<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <!-- Modern POS Dashboard Template -->
    <t t-name="PosDashboard">
        <div class="oh_dashboards">
            <!-- Modern KPI Cards Grid -->
            <div class="modern-kpi-grid fade-in">
                <!-- Today Orders -->
                <div class="modern-kpi-card primary" t-on-click="pos_order_today">
                    <div class="kpi-content">
                        <div class="kpi-icon primary">
                            <i class="fa fa-shopping-bag"/>
                        </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Today Orders</div>
                            <div class="kpi-value"><t t-esc="state.today_sale"/></div>
                                    </div>
                                </div>
                            </div>

                <!-- Today Sales -->
                <div class="modern-kpi-card success" t-on-click="pos_order_today">
                    <div class="kpi-content">
                        <div class="kpi-icon success">
                            <i class="fa fa-dollar-sign"/>
                        </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Today Sales</div>
                            <div class="kpi-value"><t t-esc="state.today_sale_amount"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Today Refund Orders -->
                <div class="modern-kpi-card danger" t-on-click="pos_refund_today_orders">
                    <div class="kpi-content">
                        <div class="kpi-icon danger">
                            <i class="fa fa-undo"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Today Refunds</div>
                            <div class="kpi-value"><t t-esc="state.today_refund_total"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Total Orders -->
                <div class="modern-kpi-card primary" t-on-click="pos_order">
                    <div class="kpi-content">
                        <div class="kpi-icon primary">
                            <i class="fa fa-shopping-cart"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Total Orders</div>
                            <div class="kpi-value"><t t-esc="state.total_order_count"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Total Sales -->
                <div class="modern-kpi-card success" t-on-click="pos_order">
                    <div class="kpi-content">
                        <div class="kpi-icon success">
                            <i class="fa fa-chart-line"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Total Sales</div>
                            <div class="kpi-value"><t t-esc="state.total_sale"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Total Refund Orders -->
                <div class="modern-kpi-card danger" t-on-click="pos_refund_orders">
                    <div class="kpi-content">
                        <div class="kpi-icon danger">
                            <i class="fa fa-times-circle"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Total Refunds</div>
                            <div class="kpi-value"><t t-esc="state.total_refund_count"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- New Customers -->
                <div class="modern-kpi-card info" t-on-click="new_customers">
                    <div class="kpi-content">
                        <div class="kpi-icon info">
                            <i class="fa fa-user-plus"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">New Customers</div>
                            <div class="kpi-value"><t t-esc="state.new_customer_count"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Retained Customers -->
                <div class="modern-kpi-card warning" t-on-click="retained_customers">
                    <div class="kpi-content">
                        <div class="kpi-icon warning">
                            <i class="fa fa-user-check"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Retained Customers</div>
                            <div class="kpi-value"><t t-esc="state.retained_customer_count"/></div>
                        </div>
                    </div>
                                    </div>

                <!-- Inactive Customers -->
                <div class="modern-kpi-card danger" t-on-click="inactive_customers">
                    <div class="kpi-content">
                        <div class="kpi-icon danger">
                            <i class="fa fa-user-times"/>
                                </div>
                        <div class="kpi-text">
                            <div class="kpi-title">Inactive Customers</div>
                            <div class="kpi-value"><t t-esc="state.inactive_customer_count"/></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modern Charts Section -->
            <div class="charts-section slide-in-left">
                <!-- Sales Report Chart -->
                <div class="modern-chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Sales Report</h3>
                        <div class="chart-controls">
                            <select class="modern-select" id="pos_sales" t-on-click="onclick_pos_sales">
                                <option value="">Select Period</option>
                                <option value="pos_weekly_sales">Weekly</option>
                                <option value="pos_monthly_sales">Monthly</option>
                            </select>
                        </div>
                        </div>
                    <div class="chart-container">
                        <canvas id="canvas_1" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Sales vs Cost Card -->
                <div class="modern-chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Sales vs Cost</h3>
                        <div class="chart-controls">
                            <select class="modern-select" id="pos_sales_cost" t-on-click="onclick_pos_sales_cost">
                                <option value="">Select Period</option>
                                    <option value="pos_today_sales_cost">Today</option>
                                    <option value="pos_week_sales_cost">Week</option>
                                    <option value="pos_month_sales_cost">Month</option>
                                </select>
                            </div>
                        </div>
                    <div class="sales-cost-grid">
                        <div class="sales-cost-item sales">
                            <div class="sales-cost-label">Sales</div>
                            <div class="sales-cost-value"><t t-esc="state.sale_vs_cost[0]"/></div>
                                </div>
                        <div class="sales-cost-item cost">
                            <div class="sales-cost-label">Cost</div>
                            <div class="sales-cost-value"><t t-esc="state.sale_vs_cost[1]"/></div>
                        </div>
                        <div class="sales-cost-item profit">
                            <div class="sales-cost-label">Profit</div>
                            <div class="sales-cost-value"><t t-esc="state.sale_vs_cost[2]"/></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accounting Reports Section -->
            <div class="accounting-reports-section slide-in-left">
                <div class="reports-header">
                    <h3 class="reports-title">Financial Reports</h3>
                    <div class="reports-controls">
                        <div class="report-date-selector">
                            <label class="date-label">Report Period</label>
                            <div class="date-inputs-inline">
                                <input type="date" class="modern-date-input" id="report_from_date" 
                                       t-att-value="state.report_from_date" t-on-change="onReportDateChange"/>
                                <span class="date-separator">to</span>
                                <input type="date" class="modern-date-input" id="report_to_date" 
                                       t-att-value="state.report_to_date" t-on-change="onReportDateChange"/>
                            </div>
                        </div>
                        <div class="report-type-selector">
                            <label class="date-label">Report Type</label>
                            <select class="modern-select" id="report_type" t-on-change="onReportTypeChange">
                                <option value="profit_loss">Profit &amp; Loss</option>
                                <option value="balance_sheet">Balance Sheet</option>
                                <option value="trial_balance">Trial Balance</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Report Display Area -->
                <div class="report-display-area">
                    <!-- Profit &amp; Loss Report -->
                    <div class="report-content" t-if="state.current_report_type === 'profit_loss'">
                        <div class="report-header">
                            <h4 class="report-title">Profit &amp; Loss Statement</h4>
                            <div class="report-period">
                                <t t-esc="state.report_from_date"/> to <t t-esc="state.report_to_date"/>
                            </div>
                        </div>
                        <div class="report-table-container">
                            <table class="modern-report-table">
                                <thead>
                                    <tr>
                                        <th>Account</th>
                                        <th>Debit</th>
                                        <th>Credit</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="state.profit_loss_data" t-as="line" t-key="line.id">
                                        <tr t-att-class="line.level === 1 ? 'report-total-row' : (line.level === 2 ? 'report-subtotal-row' : '')">
                                            <td t-att-style="'padding-left: ' + (line.level * 20) + 'px'">
                                                <t t-esc="line.name"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-esc="line.debit"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-esc="line.credit"/>
                                            </td>
                                            <td class="text-right" t-att-class="line.balance < 0 ? 'text-danger' : 'text-success'">
                                                <t t-esc="line.balance"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Balance Sheet Report -->
                    <div class="report-content" t-if="state.current_report_type === 'balance_sheet'">
                        <div class="report-header">
                            <h4 class="report-title">Balance Sheet</h4>
                            <div class="report-period">
                                As of <t t-esc="state.report_to_date"/>
                            </div>
                        </div>
                        <div class="balance-sheet-container">
                            <div class="balance-sheet-section">
                                <h5 class="section-title">ASSETS</h5>
                                <table class="modern-report-table">
                                    <thead>
                                        <tr>
                                            <th>Account</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="state.balance_sheet_assets" t-as="line" t-key="line.id">
                                            <tr t-att-class="line.level === 1 ? 'report-total-row' : (line.level === 2 ? 'report-subtotal-row' : '')">
                                                <td t-att-style="'padding-left: ' + (line.level * 20) + 'px'">
                                                    <t t-esc="line.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="line.balance"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                            <div class="balance-sheet-section">
                                <h5 class="section-title">LIABILITIES &amp; EQUITY</h5>
                                <table class="modern-report-table">
                                    <thead>
                                        <tr>
                                            <th>Account</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="state.balance_sheet_liabilities" t-as="line" t-key="line.id">
                                            <tr t-att-class="line.level === 1 ? 'report-total-row' : (line.level === 2 ? 'report-subtotal-row' : '')">
                                                <td t-att-style="'padding-left: ' + (line.level * 20) + 'px'">
                                                    <t t-esc="line.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="line.balance"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Trial Balance Report -->
                    <div class="report-content" t-if="state.current_report_type === 'trial_balance'">
                        <div class="report-header">
                            <h4 class="report-title">Trial Balance</h4>
                            <div class="report-period">
                                <t t-esc="state.report_from_date"/> to <t t-esc="state.report_to_date"/>
                            </div>
                        </div>
                        <div class="report-table-container">
                            <table class="modern-report-table">
                                <thead>
                                    <tr>
                                        <th>Account</th>
                                        <th>Debit</th>
                                        <th>Credit</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="state.trial_balance_data" t-as="line" t-key="line.id">
                                        <tr t-att-class="line.level === 1 ? 'report-total-row' : (line.level === 2 ? 'report-subtotal-row' : '')">
                                            <td t-att-style="'padding-left: ' + (line.level * 20) + 'px'">
                                                <t t-esc="line.name"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-esc="line.debit"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-esc="line.credit"/>
                                            </td>
                                            <td class="text-right" t-att-class="line.balance < 0 ? 'text-danger' : 'text-success'">
                                                <t t-esc="line.balance"/>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div class="report-loading" t-if="state.report_loading">
                        <div class="loading-spinner"></div>
                        <p>Generating report...</p>
                    </div>

                    <!-- No Data State -->
                    <div class="report-no-data" t-if="!state.report_loading and state.current_report_data.length === 0">
                        <div class="no-data-icon">
                            <i class="fa fa-chart-line"/>
                        </div>
                        <p>No data available for the selected period</p>
                    </div>
                </div>
            </div>

            <!-- Date Range Selector -->
            <div class="date-range-section slide-in-right">
                <div class="date-range-header">
                    <h3 class="date-range-title">Date Range Filter</h3>
                </div>
                <div class="date-inputs">
                    <div class="date-input-group">
                        <label class="date-label">From Date</label>
                        <input type="date" class="modern-date-input" id="from_date_cus" 
                               t-att-value="state.from_date" t-on-change="onDateChange"/>
                    </div>
                    <div class="date-input-group">
                        <label class="date-label">To Date</label>
                        <input type="date" class="modern-date-input" id="to_date_cus" 
                               t-att-value="state.to_date" t-on-change="onDateChange"/>
                    </div>
                </div>
            </div>

            <!-- Target Input Section -->
            <div class="target-section slide-in-left">
                <h3 class="target-header">Monthly Target Setting</h3>
                <div class="target-form">
                    <div class="target-input-group">
                        <label class="target-label">Monthly Target Amount</label>
                        <input type="number" class="modern-input" id="float_input" 
                               step="any" placeholder="Enter Monthly Target"/>
        </div>
                    <button class="modern-btn" id="submit_target" t-on-click="onSubmitTarget">
                        Set Target
                    </button>
                </div>
            </div>

            <!-- Modern Tables Section -->
            <div class="tables-section slide-in-right">
                <!-- Top Selling Products POS -->
                <div class="modern-table-card">
                    <div class="table-header">Top Selling Products (POS)</div>
                    <table class="modern-table">
                                        <thead>
                                        <tr>
                                <th>Product Name</th>
                                <th>Sold Qty</th>
                                <th>Remaining</th>
                                            <th>Total Amount</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                            <t t-foreach="state.top_selling_product_pos" t-as="product" t-key="product.id_index">
                                <tr>
                                    <td><t t-esc="product.product_name['en_US']"/></td>
                                    <td><t t-esc="product.total_quantity"/></td>
                                    <td><t t-esc="product.available_quantity"/></td>
                                    <td><t t-esc="(product.total_quantity * product.cost).toFixed(2)"/></td>
                                            </tr>
                                        </t>
                                        </tbody>
                                    </table>
                                </div>

                <!-- Top Selling Products Inventory -->
                <div class="modern-table-card">
                    <div class="table-header">Top Selling Products (Inventory)</div>
                    <table class="modern-table">
                                        <thead>
                                        <tr>
                                <th>Product Name</th>
                                <th>Sold Qty</th>
                                <th>Remaining</th>
                                            <th>Total Amount</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                            <t t-foreach="state.top_selling_product_inv" t-as="product" t-key="product.id_index">
                                <tr>
                                    <td><t t-esc="product.product_name['en_US']"/></td>
                                    <td><t t-esc="product.total_quantity"/></td>
                                    <td><t t-esc="product.available_quantity"/></td>
                                    <td><t t-esc="(product.total_quantity * product.cost).toFixed(2)"/></td>
                                            </tr>
                                        </t>
                                        </tbody>
                                    </table>
                                </div>

                <!-- Sales by Salesperson -->
                <div class="modern-table-card">
                    <div class="table-header">Sales by Salesperson</div>
                    <table class="modern-table">
                                        <thead>
                                        <tr>
                                <th>Salesperson</th>
                                <th>Orders</th>
                                <th>Amount</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                            <t t-foreach="state.top_salesperson" t-as="salesperson" t-key="salesperson.id_index">
                                <tr>
                                    <td><t t-esc="salesperson[0]"/></td>
                                    <td><t t-esc="salesperson[2]"/></td>
                                    <td><t t-esc="salesperson[1]"/></td>
                                            </tr>
                                        </t>
                                        </tbody>
                                    </table>
                                </div>

                <!-- Session Status -->
                <div class="modern-table-card">
                    <div class="table-header">Session Status</div>
                    <table class="modern-table">
                                        <thead>
                                        <tr>
                                <th>Session</th>
                                <th>Status</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                            <t t-foreach="state.selling_product" t-as="session" t-key="session.id_index">
                                <tr>
                                    <td><t t-esc="session['session']"/></td>
                                    <td><t t-esc="session['status']"/></td>
                                            </tr>
                                        </t>
                                        </tbody>
                                    </table>
                                </div>

                <!-- Payment Methods -->
                <div class="modern-table-card">
                    <div class="table-header">Payment Methods</div>
                    <table class="modern-table">
                                            <thead>
                                                <tr>
                                <th>Payment Method</th>
                                <th>Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                            <t t-foreach="state.payment_details" t-as="payment_method" t-key="payment_method.id_index">
                                <tr>
                                    <td><t t-esc="payment_method[0]['en_US']"/></td>
                                    <td><t t-esc="payment_method[1]"/></td>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>
                                    </div>

                <!-- Monthly Target Progress -->
                <div class="modern-table-card">
                    <div class="table-header">Target Progress</div>
                    <table class="modern-table">
                                        <thead>
                                            <tr>
                                <th>Period</th>
                                <th>Actual</th>
                                <th>Target</th>
                                <th>Progress</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                <td>Daily</td>
                                <td><t t-esc="state.daily_actual"/></td>
                                <td><t t-esc="state.daily_target"/></td>
                                <td><t t-esc="state.daily_percentage"/>%</td>
                                            </tr>
                                            <tr>
                                <td>Weekly</td>
                                <td><t t-esc="state.weekly_actual"/></td>
                                <td><t t-esc="state.weekly_target"/></td>
                                <td><t t-esc="state.weekly_percentage"/>%</td>
                                            </tr>
                                            <tr>
                                <td>Monthly</td>
                                <td><t t-esc="state.monthly_actual"/></td>
                                <td><t t-esc="state.monthly_target"/></td>
                                <td><t t-esc="state.monthly_percentage"/>%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                </div>
            </div>

            <!-- Monthly History Table -->
            <div class="modern-table-card slide-in-left" style="margin-top: 24px;">
                <div class="table-header">Monthly History</div>
                <div style="max-height: 400px; overflow-y: auto;">
                    <table class="modern-table">
                                        <thead>
                                            <tr>
                                                <th>Month</th>
                                <th>Sales</th>
                                                <th>Cost</th>
                                                <th>Commission</th>
                                                <th>Gross Profit</th>
                                                <th>Expense</th>
                                                <th>Net Income</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                             <t t-foreach="state.history_data" t-as="hd" t-key="hd.id_index">
                                                <tr>
                                                    <td><t t-esc="hd.name"/></td>
                                                    <td><t t-esc="hd.sale"/></td>
                                                    <td><t t-esc="hd.cost"/></td>
                                                    <td><t t-esc="hd.commission"/></td>
                                                    <td><t t-esc="hd.gross_profit"/></td>
                                                    <td><t t-esc="hd.expense"/></td>
                                                    <td><t t-esc="hd.net_income"/></td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
    </t>
</templates>